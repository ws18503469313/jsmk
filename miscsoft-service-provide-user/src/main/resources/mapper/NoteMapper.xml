<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itmuch.mapper.NoteMapper" >
  <resultMap id="BaseResultMap" type="com.itmuch.model.Note" >
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" property="id" jdbcType="CHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="categray_id" property="categrayId" jdbcType="CHAR" />
    <result column="publish_time" property="publishTime" jdbcType="TIMESTAMP" />
    <result column="shutdown" property="shutdown" jdbcType="BIT" />
    <result column="like" property="like" jdbcType="INTEGER" />
  </resultMap>
  
  
  <sql id="common">
  	<if test="id!=null and id!=''">
  		AND nt.id = #{id}
  	</if>
  	<if test="name != null and name != ''">
  		AND nt.name like"%"#{name}"%"
  	</if>
  	<if test="categrayId != null and categrayId != ''">
  		AND ca.id = #{categrayId}
  	</if>
  </sql>
  
  <select id="listNote" parameterType="com.itmuch.dto.NoteDTO" resultType="com.itmuch.dto.NoteDTO">
  	SELECT nt.id,nt.`name`,nt.`like`,nt.publish_time as publishTime,ca.`name` AS categrayName, ca.id AS categrayId 
  	FROM ss_note nt 
  	LEFT JOIN ss_categray ca on nt.categray_id = ca.id 
	WHERE nt.is_delete = false 
	<include refid="common" />
	ORDER BY nt.id
  </select>
</mapper>